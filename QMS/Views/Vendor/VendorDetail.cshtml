@using QMS.Core.Models
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@model VendorViewModel

@{
    ViewData["Title"] = "Vendor Detail";
}

<link href="~/css/fontawesome/styles.min.css" rel="stylesheet" />
<link href="~/css/tabulator/tabulator.min.css" rel="stylesheet" />
<link href="~/css/tabulator/tabulator_bootstrap4.min.css" rel="stylesheet" />
<script src="~/js/jquery.min.js"></script>
<script src="~/js/jquery.datatables.js"></script>
<link href="~/css/pnotify.css" rel="stylesheet" />
<script src="~/js/pnotify.js"></script>
<script src="~/js/pnotify.confirm.js"></script>
<script src="~/lib/bootstrap/dist/js/datatables.buttons.min.js"></script>
<script src="~/lib/bootstrap/dist/js/popupAlert.js"></script>
<script src="~/lib/bootstrap/dist/js/jszip.min.js"></script>
<script src="~/lib/bootstrap/dist/js/buttons.html5.min.js"></script>
<script src="~/js/common.js"></script>
<script src="~/js/tabulator.js"></script>
<script src="~/js/xlsx.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
    /* Reduce height ONLY for the RIGHT card */
    .right-card .card-body {
        padding-bottom: 15px !important; /* adjust if needed */
    }

    .form-label {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 6px;
    }

    .form-control {
        border: 1px solid #d1d5db;
        border-radius: 8px;
        height: 42px;
        font-size: 14px;
        padding: 0 6px !important;
    }

    
    .form-control:focus {
        border-color: #3b82f6 !important; /* blue border */
        background-color: #eaf3ff !important; /* light blue fill */
        box-shadow: none;
    }

    /* Base style for both buttons */
    .btn-save,
    .btn-back {
        height: 40px;
        padding: 6px 24px !important;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: #fff !important;
        border: 1px solid;
    }

    /* === GREEN SAVE (same as ADD button) === */
    .btn-save {
        border-color: #16a34a !important; /* thin green border */
        color: #16a34a !important; /* green text */
    }

        .btn-save i {
            color: #16a34a !important; /* green icon */
        }

        .btn-save:hover {
            background: #f0fff4 !important; /* very light green */
        }

    
    .btn-back {
        border-color: #f97316 !important; /* thin orange border */
        color: #f97316 !important; /* orange text */
    }

        .btn-back i {
            color: #f97316 !important; /* orange icon */
        }

        .btn-back:hover {
            background: #fff7f0 !important; /* very light orange */
        }


    .button-bar {
        margin-top: -70px;
        margin-right: 25px;
    }

        .button-bar .btn {
            margin-left: 8px; /* tiny gap */
        }

            .button-bar .btn:first-child {
                margin-left: 0;
            }
    .tabs-bar {
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 1.5rem;
    }

    /* Normal tab */
    #v-tabs .nav-link {
        border: none;
        border-bottom: 3px solid transparent;
        border-radius: 0;
        background-color: transparent;
        color: #6b7280;
        font-weight: 500;
        font-size: 0.95rem;
        padding: 0.75rem 1.5rem;
        margin: 0 0.5rem;
    }

        /* Active tab */
        #v-tabs .nav-link.active {
            border-bottom-color: #2563eb;
            color: #2563eb !important;
            background-color: transparent !important;
            font-weight: 600;
        }

        #v-tabs .nav-link:hover {
            color: #2563eb;
        }

    #v-tabContent {
        padding-top: 0.5rem;
    }

    label {
        margin-bottom: 0;
        margin-top: .3rem;
    }

    .form-group {
        margin-bottom: 0.5rem;
    }

    .custome-body {
        margin-bottom: -17px !important;
        padding: 0.75rem !important;
        margin-top: -17px !important;
    }

    #scrollToTopBtn:hover {
        background-color: #0056b3;
    }

    #scrollToTopBtn {
        outline: none;
    }

    .tabulator .tabulator-header .tabulator-col {
        font-size: 14px;
        background-color: #D6E4F0;
        font-weight: 600;
        border-right: 1px solid #ccc;
    }

    .tabulator-row .tabulator-cell {
        padding: 5px 5px;
        font-size: 14px;
        height: 30px;
    }

    .tabulator-cell:hover {
        color: #4682B4 !important;
        cursor: pointer !important;
        font-weight: bold;
    }

    .tabulator-row .tabulator-cell.tabulator-frozen.tabulator-frozen-left {
        border-right: 1px solid #ccc;
    }

    .tabulator .tabulator-header .tabulator-frozen.tabulator-frozen-left {
        border-right: 1px solid #ccc;
    }

    .vendor-card {
        border: none;
        border-radius: 8px;
        margin-top: 1px;
    }

        .vendor-card .card-body {
            padding: 3px 7px;
        }

    .vendor-title {
        margin-top: 0;
        font-size: 1.3rem;
        font-weight: 700;
        color: #1b2d4f;
        margin-bottom: 4px;
    }

    .vendor-info span {
        margin-right: 14px;
        font-size: 0.9rem;
        color: #555;
      font-weight: bold;
    }

    .vendor-info i {
        margin-right: 5px;
        color: #1b2d4f;
    }

    .status-badge {
        padding: 3px 12px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
    }

        .status-badge.active {
            background-color: #ccf8e2;
            color: #1b7f4b;
            margin-right: 20px;
        }

    .role-badge {
        background: #e8f0ff;
        color: #2d6cdf;
        font-weight: 600;
        padding: 6px 18px;
        border-radius: 999px;
        font-size: 14px;
        display: inline-block;
    }

    .vendor-wrapper {
        padding: 1.5rem;
        border-radius: 12px;
    }

    .qms-card {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 5px; /* slightly tighter padding */
        margin-bottom: 5px;
        margin-top: -15px;
    }

        .qms-card .card-header {
            background: #ffffff !important;
            border-bottom: none;
            border-radius: 12px 12px 0 0;
            padding: 6px 8px;
        }

        .qms-card .card-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }

        .qms-card .row.mb-3 {
            margin-bottom: 4px !important; /* was ~16px; now half */
        }

        .qms-card .form-label {
            margin-bottom: 1px !important; /* tighten label-to-input gap */
        }

    .contact-actions i {
        font-size: 14px;
        cursor: pointer;
        margin-right: 10px;
    }

        .contact-actions i:last-child {
            margin-right: 0;
        }

        .contact-actions i:hover {
            opacity: 0.8;
        }


    .qms-card.vendor-contact-card {
        max-width: 1410px;
        margin: 0 auto 16px;
        padding: 2px 4px; /* reduced from 4px 6px */
        margin-top: 15px !important;
    }

        .qms-card.vendor-contact-card .card-body {
            padding: 0px 1px; /* reduced from 1px 1px */
        }


    .contact-actions .bi-pencil {
        font-size: 16px;
        color: #3b82f6; /* thin blue like screenshot */
        font-weight: 400;
        cursor: pointer;
    }
    /* make address textarea a bit taller */
/*     .address-textarea {
        min-height: 90px; /* adjust if you want taller/shorter */
        max-height: 250px;
        resize: vertical;
    } */

    .qms-card.vendor-contact-card {
        padding: 2px 6px !important; 
    }

    
    .qms-card.vendor-contact-card .card-body {
        padding: 2px 5px !important; 
    }

    
    .qms-card.vendor-contact-card .row.mb-3 {
        margin-bottom: 5px !important; 
    }

    
    .qms-card.vendor-contact-card hr {
        margin: 5px 0 !important; 
    }

    
    .qms-card.vendor-contact-card .pl-1,
    .qms-card.vendor-contact-card .px-2 {
        padding-left: 3px !important; 
        padding-right: 3px !important;
    }

    
    .qms-card.vendor-contact-card .form-control {
        height: 38px !important; 
    }





</style>

<div class="content">
    <input type="hidden" id="hdnId" name="Id" value="@Model?.Id" />
    <input type="hidden" id="hdnDate" name="Date" value="@Model?.CreatedDate" />
    <input type="hidden" id="hdnCreateBy" name="CreateBy" value="@Model?.CreatedBy" />
    <input type="hidden" id="hdnVendorCode" name="Vendor_Code" value="@Model?.Vendor_Code" />
    <input type="hidden" id="hdnUserRole" value="@((HttpContextAccessor.HttpContext.Session.GetInt32("UserRole") ?? 0))" />

    <div class="card vendor-card mb-3">
        <div class="card-body d-flex justify-content-between align-items-center">
            @if (Model?.Id > 0)
            {
                <div>
                    <h4 class="vendor-title">@Model?.Name</h4>

                    <div class="vendor-info">
                        <span>
                            <i class="bi bi-envelope"></i>
                            <span class="contact-bold">@Model?.Email</span>
                        </span>

                        <span>
                            <i class="bi bi-telephone"></i>
                            <span class="contact-bold">@Model?.MobileNo</span>
                        </span>
                    </div>
                </div>

                <div>
                    <span class="status-badge active">Active</span>
                </div>
            }
            else
            {
                <div class="card-body d-flex justify-content-between align-items-center py-3" style="min-height:80px;">
                    <div>
                        <b style="font-size:large; color:#4682B4;">
                            Vendor Details
                        </b>
                    </div>
                </div>
            }
        </div>
    </div>


    <div class="card">
        <div class="card-body">
 
            <div class="nav nav-tabs tabs-bar" id="v-tabs" role="tablist">
                <a class="nav-link active" id="v-tab1" data-toggle="tab" href="#tab1" role="tab">Vendor Details</a>
                <a class="nav-link" id="v-tab2" data-toggle="tab" href="#tab2" role="tab">Certificates</a>
                <a class="nav-link" id="v-tab3" data-toggle="tab" href="#tab3" role="tab">Products</a>
                <a class="nav-link" id="v-tab4" data-toggle="tab" href="#tab4" role="tab">Third Party Testing Report</a>
                <a class="nav-link" id="v-tab5" data-toggle="tab" href="#tab5" role="tab">BIS Certification (Product Wise)</a>
            </div>
        </div>

        <div>
            <div class="tab-content col-12" id="v-tabContent">

                <div class="tab-pane fade show active" id="tab1" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center" style="padding: 0.7rem;">
                        <div style="font-size:large;color:#4682B4">
                            <b hidden>Vendor Details</b>
                        </div>
                    </div>

                    <div class="button-bar d-flex justify-content-end mb-3">
                        <button type="button" id="saveButton" onclick="InsertUpdateVendorDetail()"
                                class="btn btn-save me-3">
                            <i class="fas fa-floppy-disk"></i> Save
                        </button>

                        <button type="button" class="btn btn-back" onclick="history.back()">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                    </div>

          
                    @* <div class="card qms-card mb-4" style="max-width:1400px; margin:auto;">
                        <div class="card-header d-flex align-items-center mb-3">
                            <h5 class="card-title m-0">Company Information</h5>
                        </div>

                        <div class="card-body">
                            <div class="row g-4">
                                <div class="col-md-4">
                                    <label class="form-label">Company Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" placeholder="Enter Company Name">
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Vendor Code <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" placeholder="Enter Vendor Code">
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">GST Number <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" placeholder="Enter GST Number">
                                </div>
                            </div>

                            <div class="mt-4">
                                <label class="form-label">
                                    <i class="bi bi-geo-alt me-1"></i> Address <span class="text-danger">*</span>
                                </label>
                                <textarea class="form-control" rows="3" placeholder="Enter Address"></textarea>
                            </div>
                        </div>
                    </div> *@


                    <div class="row" style="max-width:1425px; margin:auto;">
                        <div class="col-12">
                            <div class="row">

                                <!-- LEFT CARD -->
                                <div class="col-md-6">
                                    <div class="card qms-card">
                                        <div class="card-body">
                                            <div class="row mb-3">
                                                <div class="col-md-7" style="flex: 0 0 70%; max-width: 70%;">
                                                    <label class="form-label">Name</label>
                                                    <input name="Name" id="Name" class="form-control" required value="@Model?.Name" />
                                                </div>

                                                <div class="col-md-5" style="flex: 0 0 30%; max-width: 30%;">
                                                    <label class="form-label">Code</label>
                                                    <input name="Vendor_Code" id="Vendor_Code" class="form-control" required value="@Model?.Vendor_Code" />
                                                </div>
                                            </div>


                                            <div class="row mb-3">
                                                <div class="col-md-12">
                                                    <label class="form-label">Address</label>
                                                    <!-- textarea to allow larger height -->
                                                    <textarea name="Address" id="Address" rows="5" class="form-control" required>@Model?.Address</textarea>
                                                </div>
                                            </div>

                                        </div> <!-- /.card-body -->
                                    </div> <!-- /.card -->
                                </div> <!-- /.col-md-6 -->
                                <!-- RIGHT CARD -->
                                <div class="col-md-6 right-card">
                                    <div class="card qms-card">
                                        <div class="card-body">

                                            <!-- ROW 1: Email | Mobile -->
                                            <div class="row mb-3">

                                                <div class="col-md-6">
                                                    <label class="form-label">Mobile</label>
                                                    <input name="MobileNo" id="MobileNo" class="form-control" required value="@Model?.MobileNo" />
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Email</label>
                                                    <input name="Email" id="Email" class="form-control" required value="@Model?.Email" />
                                                </div>

                                            </div>

                                            <!-- ROW 2: GST No. | Contact Person -->
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">GST No.</label>
                                                    <input name="GstNo" id="GstNo" class="form-control" required value="@Model?.GstNo" />
                                                    <span id="GstNo_Error" class="text-danger"></span>
                                                </div>

                                                <div class="col-md-6">
                                                    <label class="form-label">Contact Person</label>
                                                    <input name="Contact_Persons" id="Contact_Persons" class="form-control" required value="@Model?.Contact_Persons" />
                                                </div>
                                            </div>

                                            <!-- ROW 3: User Name | Password -->
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">User Name</label>
                                                    <input name="User_Name" id="User_Name" class="form-control" required value="@Model?.User_Name" />
                                                    <span id="User_Name_Error" class="text-danger"></span>
                                                </div>

                                                <div class="col-md-6">
                                                    <label class="form-label">Password</label>
                                                    <input name="Password" id="Password" class="form-control" required value="@Model?.Password" />
                                                </div>
                                            </div>

                                        </div> 
                                    </div> 
                                </div> 


                            </div> 
                        </div> 
                    </div> 



                    <div class="card qms-card vendor-contact-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Vendor Contact Master</h5>
                        </div>

                        <div class="card-body p-2">
                            <div class="form-group">

                                <!-- Header Row -->
                                <div class="row mb-2 px-2" style="margin-left:4px;">
                                    <div class="col-md-2"><label class="form-label m-0">Role</label></div>
                                    <div class="col-md-3"><label class="form-label m-0">Name</label></div>
                                    <div class="col-md-3"><label class="form-label m-0">Email</label></div>
                                    <div class="col-md-3"><label class="form-label m-0">Mobile Number</label></div>
                                </div>

                                <hr class="mt-0 mb-3" />

                                <!-- Owner -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Owner</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Owner" id="Owner" class="form-control" required value="@Model?.Owner" placeholder="Owner Name" />
                                        <span id="Owner_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Owner_Email" id="Owner_Email" class="form-control" required value="@Model?.Owner_Email" placeholder="Owner Email" />
                                        <span id="Owner_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Owner_Mobile" id="Owner_Mobile" class="form-control" required value="@Model?.Owner_Mobile" placeholder="Owner Mobile No." />
                                        <span id="Owner_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- Plant Head -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Plant Head</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Plant_Head" id="Plant_Head" class="form-control" required value="@Model?.Plant_Head" placeholder="Plant Head Name" />
                                        <span id="Plant_Head_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Plant_Email" id="Plant_Email" class="form-control" required value="@Model?.Plant_Email" placeholder="Plant Head Email" />
                                        <span id="Plant_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Plant_Mobile" id="Plant_Mobile" class="form-control" required value="@Model?.Plant_Mobile" placeholder="Plant Head Mobile No." />
                                        <span id="Plant_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- Quality Manager -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Quality Manager</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Quality_Manger" id="Quality_Manger" class="form-control" value="@Model?.Quality_Manager" placeholder="Quality Manager Name" />
                                        <span id="Quality_Manger_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Quality_Email" id="Quality_Email" class="form-control" value="@Model?.Quality_Email" placeholder="Quality Manager Email" />
                                        <span id="Quality_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Quality_Mobile" id="Quality_Mobile" class="form-control" value="@Model?.Quality_Mobile" placeholder="Quality Manager Mobile No." />
                                        <span id="Quality_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- PDG Manager -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">PDG Manager</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PDG_Manager" id="PDG_Manager" class="form-control" required value="@Model?.PDG_Manager" placeholder="PDG Manager Name" />
                                        <span id="PDG_Manager_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PDG_Email" id="PDG_Email" class="form-control" required value="@Model?.PDG_Email" placeholder="PDG Manager Email" />
                                        <span id="PDG_Manager_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PDG_Mobile" id="PDG_Mobile" class="form-control" required value="@Model?.PDG_Mobile" placeholder="PDG Manager Mobile No." />
                                        <span id="PDG_Manager_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- SCM Manager -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">SCM Manager</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="SCM_Manager" id="SCM_Manager" class="form-control" required value="@Model?.SCM_Manager" placeholder="SCM Manager Name" />
                                        <span id="SCM_Manager_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="SCM_Email" id="SCM_Email" class="form-control" required value="@Model?.SCM_Email" placeholder="SCM Manager Email" />
                                        <span id="SCM_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="SCM_Mobile" id="SCM_Mobile" class="form-control" required value="@Model?.SCM_Mobile" placeholder="SCM Manager Mobile No." />
                                        <span id="SCM_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- PRD Manager -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">PRD Manager</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PRD_Manager" id="PRD_Manager" class="form-control" required value="@Model?.PRD_Manager" placeholder="PRD Manager Name" />
                                        <span id="PRD_Manager_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PRD_Email" id="PRD_Email" class="form-control" required value="@Model?.PRD_Email" placeholder="PRD Manager Email" />
                                        <span id="PRD_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="PRD_Mobile" id="PRD_Mobile" class="form-control" required value="@Model?.PRD_Mobile" placeholder="PRD Manager Mobile No." />
                                        <span id="PRD_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- Service Manager -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Service Manager</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Service_Manager" id="Service_Manager" class="form-control" required value="@Model?.Service_Manager" placeholder="Service Manager Name" />
                                        <span id="Service_Manager_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Service_Email" id="Service_Email" class="form-control" required value="@Model?.Service_Email" placeholder="Service Manager Email" />
                                        <span id="Service_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Service_Mobile" id="Service_Mobile" class="form-control" required value="@Model?.Service_Mobile" placeholder="Service Manager Mobile No." />
                                        <span id="Service_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- Other Contact 1 -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Other Contact 1</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_One" id="Other_Cont_One" class="form-control" required value="@Model?.Other_Cont_One" placeholder="Contact One Name" />
                                        <span id="Other_Cont_One_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_OneEmail" id="Other_Cont_OneEmail" class="form-control" required value="@Model?.Other_Cont_OneEmail" placeholder="Contact One Email" />
                                        <span id="Other_Cont_One_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_OneMobile" id="Other_Cont_OneMobile" class="form-control" required value="@Model?.Other_Cont_OneMobile" placeholder="Contact One Mobile No." />
                                        <span id="Other_Cont_One_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                                <hr class="my-2" />

                                <!-- Other Contact 2 -->
                                <div class="row mb-3 px-2 contact-row">
                                    <div class="col-md-2 d-flex align-items-center">
                                        <span class="role-badge">Other Contact 2</span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_Two" id="Other_Cont_Two" class="form-control" required value="@Model?.Other_Cont_Two" placeholder="Contact Two Name" />
                                        <span id="Other_Cont_Two_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_TwoEmail" id="Other_Cont_TwoEmail" class="form-control" required value="@Model?.Other_Cont_TwoEmail" placeholder="Contact Two Email" />
                                        <span id="Other_Cont_Two_Email_Error" class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <input name="Other_Cont_TwoMobile" id="Other_Cont_TwoMobile" class="form-control" required value="@Model?.Other_Cont_TwoMobile" placeholder="Contact Two Mobile No." />
                                        <span id="Other_Cont_Two_Mobile_Error" class="text-danger"></span>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>




                </div>

   
                <div class="tab-pane fade" id="tab2" role="tabpanel">
                    <div style="margin-top: -20px">
                        <div class="d-flex justify-content-between align-items-center" style="padding: 0.7rem;">
                            <div style="font-size:large;color:#4682B4">
                                <b hidden>Certificate Details</b>
                            </div>
                            <div>
                                <button type="button" id="saveCertButton" class="btn btn-outline-success legitRipple"
                                        data-toggle="modal" data-target="#certificateModal">
                                    <i class="fas fa-plus mr-2"></i>Add
                                </button>
                                <button type="button" class="btn btn-outline-primary legitRipple"
                                        onclick="openUpload()" style="margin: 1px 0px; width: 136px;font-size:14px">
                                    <i class="fas fa-upload mr-2"></i>Upload Xl
                                </button>
                                <button type="button" id="download-template" class="btn btn-outline-secondary">
                                    <i class="fas fa-download mr-2"></i> Blank Xl
                                </button>
                                <button type="button" class="btn btn-outline-warning legitRipple" onclick="history.back()">
                                    <i class="fas fa-arrow-left mr-2"></i>Back
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div class="form-group row">
                                <div id="CertificateTable" class="col-12"></div>
                            </div>
                        </div>
                    </div>
                </div>

          
                <div class="tab-pane fade" id="tab3" role="tabpanel">
                    Products content
                </div>

      
                <div class="tab-pane fade" id="tab4" role="tabpanel">
                    <div style="margin-top: -20px">
                        <div class="d-flex justify-content-between align-items-center" style="padding: 0.7rem;">
                            <div style="font-size:large;color:#4682B4">
                                <b hidden>Third Party Testing Report</b>
                            </div>
                            <div>
                                <button type="button" id="saveTPTButton" class="btn btn-outline-success legitRipple"
                                        data-toggle="modal" data-target="#TPTReportModal">
                                    <i class="fas fa-plus mr-2"></i>Add
                                </button>
                                <button type="button" class="btn btn-outline-warning legitRipple" onclick="history.back()">
                                    <i class="fas fa-arrow-left mr-2"></i>Back
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div class="form-group row">
                                <div id="TPTReportTable" class="col-12"></div>
                            </div>
                        </div>
                    </div>
                </div>

         
                <div class="tab-pane fade" id="tab5" role="tabpanel">
                    <div style="margin-top: -20px">
                        <div class="d-flex justify-content-between align-items-center" style="padding: 0.7rem;">
                            <div style="font-size:large;color:#4682B4">
                                <b hidden>BIS Certificate Details</b>
                            </div>
                            <div>
                                <button type="button" id="saveBISButton" class="btn btn-outline-success legitRipple"
                                        data-toggle="modal" data-target="#BISCertificateModal">
                                    <i class="fas fa-plus mr-2"></i>Add
                                </button>
                                <button type="button" class="btn btn-outline-primary legitRipple"
                                        onclick="openUpload()" style="margin: 1px 0px; width: 136px;font-size:14px">
                                    <i class="fas fa-upload mr-2"></i>Upload Xl
                                </button>
                                <button type="button" id="download-template" class="btn btn-outline-secondary">
                                    <i class="fas fa-download mr-2"></i> Blank Xl
                                </button>
                                <button type="button" class="btn btn-outline-warning legitRipple" onclick="history.back()">
                                    <i class="fas fa-arrow-left mr-2"></i>Back
                                </button>
                            </div>
                        </div>
                        <div id="BISCertificateTable"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>


<div id="certificateModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #bec6e1;margin-bottom:10px">
                <h5 class="modal-title" id="certificateModalTitle"><strong>Add Certificate</strong></h5>
                <button type="button" class="close" onclick="CloseModel()">&times;</button>
            </div>
            <form id="certificateForm" enctype="multipart/form-data" class="form-horizontal">
                <input type="hidden" id="vendorCertID" />
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Certificate</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <select class="form-control form-control-border txt Ph" id="certificateID" required>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">
                                    Product Code
                                </label>
                                <div class="col-lg-0.5 text-end pe-2" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7 Ph">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <label for="sear_Certi_Code" class="sr-only">Search Code</label>
                                            <input type="text"
                                                   name="sear_Certi_Code"
                                                   id="sear_Certi_Code"
                                                   class="form-control"
                                                   placeholder="Search Code"
                                                   aria-label="Search Code"
                                                   oninput="handleCertiSearch(this)"
                                                   style="text-transform: uppercase;" />
                                        </div>
                                        <div class="col-md-7">
                                            <input type="text"
                                                   id="certi_productCodeInput"
                                                   class="form-control form-control-border txt"
                                                   placeholder="Enter Product Code…"
                                                   aria-label="Product Code"
                                                   autocomplete="off"
                                                   required />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Issue Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="date" class="form-control form-control-border txt Ph" id="issueDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Expiry Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="date" class="form-control form-control-border txt Ph" id="expiryDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Remarks</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <textarea class="form-control form-control-border txt Ph" id="remarks"></textarea>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Certificate Upload</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="file" class="form-control form-control-border txt Ph" id="certUpload" required />
                                    <div id="attachmentLinks" class="file-item"></div>
                                    <input type="hidden" id="remainingAttachments" name="RemainingAttachments" value="">
                                    <input type="hidden" id="Attachments" name="Attachments">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-outline-success btn-labeled" id="certificateSaveBtn" onclick="InsertUpdateVendorcert(event)">
                        <i class="fas fa-floppy-disk mr-2"></i>Save
                    </button>
                    <button type="button" class="btn btn-outline-success legitRipple" onclick="CloseModel()">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- THIRD PARTY TESTING REPORT MODAL -->
<div id="TPTReportModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #bec6e1;margin-bottom:10px">
                <h5 class="modal-title" id="TPTReportModalTitle"><strong>Add Third Party Testing Report</strong></h5>
                <button type="button" class="close" onclick="TPTCloseModel()">&times;</button>
            </div>
            <form id="TPTReportForm" enctype="multipart/form-data" class="form-horizontal">
                <input type="hidden" id="tptr_Id" />
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Third Party Testing Report</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <select class="form-control form-control-border txt Ph" id="TPTReportID" required>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">
                                    Product Code
                                </label>
                                <div class="col-lg-0.5" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7 Ph">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <label for="TPTRsear_Code" class="sr-only">Search Code</label>
                                            <input type="text"
                                                   name="TPTRsear_Code"
                                                   id="TPTRsear_Code"
                                                   class="form-control"
                                                   placeholder="Search Code"
                                                   aria-label="Search Code"
                                                   oninput="handleThirdTestingSearch(this)"
                                                   style="text-transform: uppercase;" />
                                        </div>
                                        <div class="col-md-7">
                                            <input type="text"
                                                   id="tptr_productCodeInput"
                                                   class="form-control form-control-border txt"
                                                   placeholder="Enter Product Code…"
                                                   aria-label="Product Code"
                                                   autocomplete="off"
                                                   required />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Issue Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="date" class="form-control form-control-border txt Ph" id="TPTRissueDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Expiry Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="date" class="form-control form-control-border txt Ph" id="TPTRexpiryDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Remarks</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <textarea class="form-control form-control-border txt Ph" id="TPTRremarks"></textarea>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Report Upload</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7">
                                    <input type="file" class="form-control form-control-border txt Ph" id="reportUpload" required />
                                    <div id="tptr_attachmentLinks" class="file-item"></div>
                                    <input type="hidden" id="tptr_remainingAttachments" name="RemainingAttachments" value="">
                                    <input type="hidden" id="tptr_Attachments" name="Attachments">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-outline-success btn-labeled" id="reportSaveBtn" onclick="InsertUpdateVendorReport(event)">
                        <i class="fas fa-floppy-disk mr-2"></i>Save
                    </button>
                    <button type="button" class="btn btn-outline-success legitRipple" onclick="TPTCloseModel()">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- BIS CERTIFICATE MODAL -->
<div id="BISCertificateModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #bec6e1; margin-bottom: 10px;">
                <h5 class="modal-title" id="BIScertificateModalTitle"><strong>Add BIS Certificate</strong></h5>
                <button type="button" class="close" onclick="BISCloseModel()">&times;</button>
            </div>

            <form id="BIScertificateForm" enctype="multipart/form-data" class="form-horizontal">
                <input type="hidden" id="Id" />
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">BIS Certificate</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="text" id="BIScertificateID" class="form-control form-control-border txt Ph" placeholder="Enter BIS Certificate Name" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Model Number</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="text" id="ModelNo" class="form-control form-control-border txt Ph" placeholder="Enter Model Number…" />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">
                                    Product Code
                                </label>
                                <div class="col-lg-0.5" style="padding-top: 10px;">:</div>
                                <div class="col-lg-7 Ph">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <label for="BISsear_Code" class="sr-only">Search Code</label>
                                            <input type="text"
                                                   name="BISsear_Code"
                                                   id="BISsear_Code"
                                                   class="form-control"
                                                   placeholder="Search Code"
                                                   aria-label="Search Code"
                                                   oninput="handleBisSearch(this)"
                                                   style="text-transform: uppercase;" />
                                        </div>
                                        <div class="col-md-7">
                                            <input type="text"
                                                   id="BISproductCodeInput"
                                                   class="form-control form-control-border txt"
                                                   placeholder="Enter Product Code…"
                                                   aria-label="Product Code"
                                                   autocomplete="off"
                                                   required />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">R Number</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="text" id="RNumber" class="form-control form-control-border txt Ph" placeholder="Enter R Number…" />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">BIS Section</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="text" id="BISSection" class="form-control form-control-border txt Ph" placeholder="Enter BIS Section…" />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Issue Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="date" class="form-control form-control-border txt Ph" id="BISissueDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Expiry Date</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="date" class="form-control form-control-border txt Ph" id="BISexpiryDate" required />
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Remarks</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <textarea class="form-control form-control-border txt Ph" id="BISremarks"></textarea>
                                </div>
                            </div>

                            <div class="form-group row" style="margin: 5px;">
                                <label class="col-lg-4 col-form-label Ph" style="padding-top: 10px;">Certificate Upload</label>
                                <div class="Ph" style="padding-top: 10px;">:</div>
                                <div class="col-7 Ph">
                                    <input type="file" class="form-control form-control-border txt Ph" id="BIScertUpload" required />
                                    <div id="BISattachmentLinks" class="file-item mt-2"></div>

                                    <input type="hidden" id="BISremainingAttachments" name="RemainingAttachments" value="">
                                    <input type="hidden" id="BISAttachments" name="Attachments">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-outline-success btn-labeled" id="BISsaveBtn" onclick="InsertUpdateVendorBIS(event)">
                        <i class="fas fa-floppy-disk mr-2"></i>Save
                    </button>
                    <button type="button" class="btn btn-outline-success legitRipple" onclick="BISCloseModel()">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/scripts/vendor/vendordetails.js" asp-append-version="true"></script>
    <script src="~/scripts/vendor/bis-certificate.js" asp-append-version="true"></script>
    <script src="~/scripts/vendor/thirdPartyTesting.js" asp-append-version="true"></script>


}

@section HideSidebar { }
@await Html.PartialAsync("_UploadModalpartial")
